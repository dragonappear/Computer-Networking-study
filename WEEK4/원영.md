# 암호화

- 공개키(public key) : 누구든지 키를 확인할 수 있고 사용할 수 있는 공개된 키
- 개인키(private key) : 자기자신만 알고 있고 가지고 있는 키

## 대칭키 암호화

- 이름에서 알 수 있듯이 암호화,복호화 할 때 사용하는 키가 동일(대칭)한 방법
- 대표 알고리즘 : DES, 3DES, AES, SEED, ARIA 등
- 수행 시간이 짧은 장점이 있다.
- 안전한 키교환 방식이 요구되며 사람이 증가할수록 키 관리가 어렵다.

## 공개키(비대칭키) 암호화

- 암호화,복호화 할 때 사용하는 키가 서로 다른 경우
- 키가 공개되어 있기 때문에 키를 교환할 필요가 없다.
- 대칭키 방식에 비해 속도가 느림

1. B 공개키/개인키 쌍 생성
2. 공개키 공개(등록), 개인키는 본인이 소유
3. A가 B의 공개키를 받아옴
4. A가 B의 공개키를 사용해 데이터를 암호화
5. 암호화 된 데이터를 B에게 전송
6. B는 암호화된 데이터를 B의 개인키로 복호화(개인키는 B만 가지고 있음)

<br >
<br >
<br >

# TLS

- TLS는 `Transport Layer Security`, 전송 계층 보안의 약자이다.
- 응용 계층 데이터의 암호화, 전송 계층 데이터의 복호화를 한다.

## TLS가 하는 일

- 암호화 : 제3자로부터 전송되는 데이터를 숨긴다.
- 인증 : 정보를 교환하는 당사자가 요청된 당사자임을 보장한다.
- 무결성 : 데이터가 위조되거나 변조되지 않았음을 확인한다.

## CA(Certificate authority)

인증서의 역할은 클라이언트가 접속한 서버가 의도한 서버가 맞는지 보장하는 것인데, 이 역할을 대신 해주는 민간 기업들을 CA 라고 한다.

HTTPS를 적용하려면 이런 인증된 CA 기업들로부터 SSL 인증서를 구매해야 한다. 이 인증서를 구입하게 되면 CA 기업의 개인 키를 이용하여 암호화 한 인증서를 준다.

## SSL 인증서

SSL 인증서에는 서비스의 정보(인증서를 발급한 CA, 서비스의 도메인 등)와 서버 측 공개키가 들어있다.

## TLS handshake

![다운로드 (1)](https://user-images.githubusercontent.com/103870198/218402379-7a57e848-8222-4bc7-abc3-54b83ac61b84.png)

1. '클라이언트 헬로' 메시지: 클라이언트가 서버로 "헬로" 메시지를 전송하면서 핸드셰이크를 개시합니다. 이 메시지에는 클라이언트가 지원하는 TLS 버전, 지원되는 암호 제품군, 그리고 "클라이언트 무작위"라고 하는 무작위 바이트 문자열이 포함됩니다.

2. '서버 헬로' 메시지: 클라이언트 헬로 메시지에 대한 응답으로 서버가 서버의 SSL 인증서, 서버에서 선택한 암호 제품군, 그리고 서버에서 생성한 또 다른 무작위 바이트 문자열인 "서버 무작위"를 포함하는 메시지를 전송합니다.

3. 인증: 클라이언트가 서버의 SSL 인증서를 인증서 발행 기관을 통해 검증합니다. 이를 통해 서버가 인증서에 명시된 서버인지, 그리고 클라이언트가 상호작용 중인 서버가 실제 해당 도메인의 소유자인지를 확인합니다.

4. 예비 마스터 암호: 클라이언트가 "예비 마스터 암호"라고 하는 무작위 바이트 문자열을 하나 더 전송합니다. 예비 마스터 암호는 공개 키로 암호화되어 있으며, 서버가 개인 키로만 해독할 수 있습니다. (클라이언트는 서버의 SSL 인증서를 통해 공개 키를 받습니다.)

5. 개인 키 사용: 서버가 예비 마스터 암호를 해독합니다.

6. 세션 키 생성: 클라이언트와 서버가 모두 클라이언트 무작위, 서버 무작위, 예비 마스터 암호를 이용해 세션 키를 생성합니다. 모두 같은 결과가 나와야 합니다.

7. 클라이언트 준비 완료: 클라이언트가 세션 키로 암호화된 "완료" 메시지를 전송합니다.

8. 서버 준비 완료: 서버가 세션 키로 암호화된 "완료" 메시지를 전송합니다.

9. 안전한 대칭 암호화 성공: 핸드셰이크가 완료되고, 세션 키를 이용해 통신이 계속 진행됩니다.
