# 네트워크 3주차

## 키워드

### 4.2 라우터 내부에 무엇이 있을까?

- 패킷 스케줄링

### 4.3 인터넷 프로토콜(IP): IPv4, 주소체계, IPv6

- IPv4의 구조, 서브넷, 서브넷 마스크
- DHCP
- IPv6
- NAT

### 5.2 라우팅 알고리즘

- 정적 라우팅 알고리즘
- 동적 라우팅 알고리즘
- OSPF, BGP

### 5.6 인터넷 제어 메시지 프로토콜 (ICMP)

- ICMP, Ping(명령어)

### 6.2 오류 검출 및 정정 기술

- 패리티 검사
- 체크섬 방법
- 순환 중복 검사

### 6.4 스위치 근거리 네트워크

- MAC 주소
- ARP (Address Resolution Protocol)

## 질문 리스트

- 네트워크 계층, 링크 계층의 역할에 대해서 설명해주세요.
    - 네트워크 계층은 데이터를 목적지까지 최적 경로로 전달하는 역할을 담당한다. 라우터를 통해서 이동할 경로를 지정하고 해당 경로로 패킷을 전송한다.
    - 링크 계층은 물리 계층에서 송수신되는 정보의 에러를 검출하거나, 재전송, 흐름제어를 담당한다.
    - (꼬리질문) 라우터는 어떻게 경로를 찾을까요?
        - 직접 라우팅 테이블에 등록하는 정적 라우팅과 라우팅 프로토콜을 통해서 라우팅 테이블을 업데이트하는 동적 라우팅 방법이 있다.
        - 인터넷 사업자 내부 망에서 사용하는 IGP(OSPF), 외부 망에서 사용하는 EGP(BGP) 라우팅 프로토콜이 있으며 이를 통해 라우팅 테이블을 업데이트한다.
- IPv4와 IPv6의 차이를 설명해주세요.
    - IPv4는 최대 2^32개의 주소만 할당할 수 있다. 인터넷이 발담함에 따라 IP 주소 고갈은 분명했기에 새로운 IPv6가 등장하였다.
    - IPv6는 128비트로 구성되어 2^128 개의 주소를 가진다.
    - IPv6는 IPv4보다 간소한 헤더를 가진다. IPv4는 가변 헤더 길이 옵션이 있어 라우터가 추가적인 처리가 필요했으나 IPv6는 고정 길이 헤더이면서 확장이 가능하도록 여유를 두어 설계되었다.
    - IPv4 호스트는 DHCP나 직접 주소를 배정할 필요가 있었으나 IPv6 호스트는 네트워크에 접속하는 순간 IP 주소를 부여 받을 수 있다.
    - 참고자료
    
    [https://code-lab1.tistory.com/33](https://code-lab1.tistory.com/33)
    
- 오늘날 많은 기기들이 인터넷 연결이 가능한데, IP 주소가 부족하지 않을까요? 어떻게 이걸 해결할 수 있을까요?
    - 서브넷팅(subneting)을 통해서 기존 IP를 나눠 해결할 수 있다. (하나의 주소를 여러 개의 고립된 네트워크로 나눠서 사용)
    - 예 : 공유기에 WAN으로 연결된 주소가 IP로 조회하면 192.168로 시작함. 공유기를 통해서 서브넷팅을 한 것.
    - 서브넷 마스크와 IP 주소를 AND 연산하여 네트워크 ID를 만들고 (네트워크 ID, 브로드캐스트 ID)를 뺀 나머지 ID를 호스트로 정한다.
    - 참고자료
    
    [https://code-lab1.tistory.com/34](https://code-lab1.tistory.com/34)
    
- 컴퓨터 IP를 직접 설정하신 적 있으신가요? 자동으로 설정하셨다면 어떻게 이것이 가능할까요?
    - 동적으로 IP 주소 대여가 가능하다. 이는 DHCP 서버가 담당한다.
    - 클라이언트는 DHCP discover message를 사용해서 DHCP 정보를 획득한다.
    - 클라이언트는 DHCP 정보를 바탕으로 DHCP request를 보낸다.
    - DHCP 서버는 DHCP ACK을 보내서 IP를 제공받는다.
- (종합질문) www.google.co.kr을 브라우저에 검색했을 때, 데이터가 어떻게 전달되는지 자세히 설명해주세요.
    - (tcp/ip 모델 기준으로 설명)
    - 주소창에 도메인 검색
    - 요청 메시지와 http 헤더를 붙이고 transport layer로 넘어간다. 이 때 요청지와 목적지 포트 번호가 헤더에 기록이 된다.
    - 만약 로컬 환경 내에 도메인 이름에 해당하는 IP 주소를 모를 경우 IP 주소를 획득하기 위해서 DNS 서버에 질의를 한다.
    - DNS 서버에 질의한 후 얻은 IP 주소를 Internet layer에서 헤더에 IP 주소를 입력하고 Network access layer에 전달한다.
    - Network access layer는 실제 장비에 전달하기 위해 MAC 주소를 알아야 하는데, 이 때 ARP를 이용해서 IP 주소를 MAC 주소로 변환하여 헤더에 넣고 전달한다.
    - 전달된 패킷은 라우터를 통해서 구글 서버에 전달이 된다.
    - 라우터는 라우팅 테이블을 바탕으로 다음 라우터로 넘겨 전달이 된다.
    - 라우팅 테이블은 정적으로 수동 입력될 수 있고 동적으로 입력될 수 있다.