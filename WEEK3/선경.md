-----

4.2 라우터 내부에는 무엇이 있을까?

-----

#### 라우터
네트워크 층의 장비로 서로 다른 네트워크를 연결하기 위한 장치로  
패킷을 전송하기 위한 최적 경로를 결정하고,  
목적지를 향해 패킷들을 전송함  

* 입력 포트 :  
  물리 계층 기능과 링크 계층 기능, 검색기능을 수행함
* 스위치 구조 :  
  라우터의 입력 포트와 출력 포트를 연결함
* 출력 포트 :  
   스위치 구조에서 수신한 패킷을 저장하고 필요한 링크 계층 및 물리 계층 기능을 수행함
* 라우팅 프로세서 :  
  제어 평면 기능과 네트워크 관리 기능을 수행함 

#### 스위칭
패킷이 들어와 라우팅 테이블을 참조하고 최적의 경로를 찾아 외부로 포워딩 하는 작업  
2계층의 스위치와 이름은 같지만 다른 용어로  
3계층 장비인 라우터가 패킷 경로를 지정해 보내는 작업을 말함


-----

4.3 인터넷 프로토콜(IP): IPv4, 주소체계, IPv6 등

-----
#### IP(Internet Protocol)
인터넷에 연결되어 있는 모든 장치들을 식별할 수 있도록 각각의 장비에게 부여되는 고유 주소  
IPv4, IPv6 2가지 종류가 있으며, 일반적으로 IP주소라고 하면 IPv4주소를 말함  

#### IPv4
전 세계적으로 사용된 첫 인터넷 프로토콜
주소는 32비트 방식으로 8비트씩 4자리로 되어 있으며 각 자리는 온점으로 구분  
ex) 115.68.24.88  

0~2^32(약 42억9천)개의 주소를 가질 수 있는데,  
전 세계적으로 인터넷 사용자 수가 급증하면서 IPv4 주소가 고갈될 위기에 처해있음  
이러한 고갈 문제를 해결하기 위해 IPv6가 등장함  

#### 서브넷  
IP주소에서 네트워크 영역을 부분적으로 나눈 부분 네트워크
IPv4 주소 체계는 클래스를 나누어 IP를 할당하는데 이 방식은 매우 비효율적임  
클래스로 할당하게 되면 실제로 사용하는 호스트의 수와 할당받은 호스트의 수의 차이가 많이날 수 있고  
이런 경우 호스트가 낭비됨  
이러한 비효율성을 해결하기 위해 네트워크 장치들의 수에 따라 효율적으로 사용할 수 있는 서브넷이 등장함  

#### IPv6
현재 사용하고 있는 IP 주소 체계인 IPv4의 주소부족 문제를 해결하기 위해 개발됨
16비트씩 8자리로 각 자리는 콜론으로 구분  
128비트의 긴 주소를 사용하여 주소 부족 문제를 해결할 수 있음  

장점
* IPv4에 비해 자료 전송 속도가 빠름
* 인증성, 기밀성, 데이터 무결성의 지원으로 보안 문제를 해결할 수 있음
* IPv4와의 호환성이 뛰어남
* 주소의 확장성, 융통성, 연동성이 뛰어남
* 실시간 흐름 제어로 향상된 멀티미디어 기능을 지원
* IPv4에 비해 등급별, 서비스별로 패킷을 구분할 수 있어 품질 보장이 용이함  

그러나 아직 기존의 주소체계를 변경하는데 비용이 많이 들어서 완전히 상용화 되지는 않음  

-----
 
5.2 라우팅 알고리즘

-----

#### 라우팅 알고리즘
송신 측에서부터 수신 측 라우터의 네트워크를 통과하는 최적의 경로를 결정하는 알고리즘  
그러나 실제로는 여러 가지 이유로 최적의 경로를 결정하지 못할 수 있음  

* 중앙 집중형 라우팅 알고리즘 :  
  네트워크 전체에 대한 완전한 정보를 가지고 출발지와 목적지 사이의 최소 비용 경로를 계산함  
  Link State알고리즘이 여기에 속하며 주로 다익스트라 알고리즘을 사용함
* 분산 라우팅 알고리즘 :  
  최소 비용 경로의 계산이 라우터들에 의해 반복적이고 분산된 방식으로 수행됨  
  Distance Vector 알고리즘이 여기에 속하며 주로 벨만-포드 알고리즘을 사용함
* 정적 라우팅 알고리즘 :  
  경로의 변경이 느리고 사람이 직접 링크에 대한 비용을 수정해야 함  
  규모가 큰 네트워크에서 일일이 수정하기 불가능하며 사람이 하기에 역부족
* 동적 라우팅 알고리즘 :  
  네트워크 트래픽 부하나 topology 변화에 다라 라우터가 자체적으로 경로를 바꿈  

-----

5.6 인터넷 제어 메시지 프로토콜(ICMP)

-----
#### ICMP(Internet Control Message Protocol)
네트워크 내 장치가 데이터 전송과 관련된 문제를 전달하기 위해 사용하는 프로토콜  
IP가 비정상적으로 종료되는 경우 따로 에러처리에 대한 명시가 없기 때문에  
이러한 점을 보완하기 위해 사용함  

도착지 호스트가 없거나, 포트가 닫혀 있는 등의 에러 상황이 발생할 경우  
IP헤더에 기록되어 있는 출발지 호스트로 에러에 대한 정보를 보내주는 역할을 함  

에러 메세지로는 크게 두가지가 있음
* destination unreachable : 목적지에 도달하지 못함
* Time Exceeded : 시간이 오래 걸려 목적지에 도달하지 못함

-----

6.2 오류 검출 및 정정 기술

-----
#### 패리티 검사(Parity Check)
1의 개수를 짝수 개로 맞춰서 보낼지, 홀수 개로 맞춰서 보낼지 송신측과  
수신측이 약속하고 여분의 bit(패리티 비트)를 채워 보내는 것  

#### CRC(Cyclic Redundancy Check)
패리티 검사의 한계를 채워주기 위해 나온 오류 검출 방식
데이터에 오류가 발생했는지 확인하는 코드를 데이터 뒤에 확장 데이터를 덧붙여 보내는 방식  

#### 체크섬(Checksum)
중복 검사의 한 형태로 오류 정정을 통해 공간이나 시간속에서  
송신된 자료의 무결성을 보호하는 단순한 방법


### 예상 질문
* 스위치와 라우터의 차이는 무엇인가요?
* IP란 무엇인가요?
* ICMP란 무엇인가요?

#### 참고
[[네트워크 스터디] 인터넷 패킷 전달](https://velog.io/@chltjdrhd777/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%8A%A4%ED%84%B0%EB%94%94-%EC%9D%B8%ED%84%B0%EB%84%B7-%ED%8C%A8%ED%82%B7-%EC%A0%84%EB%8B%AC)  
[[네트워크] 패킷 Packet](https://sisiblog.tistory.com/272)  
[쉽게 이해하는 네트워크 11. 인터넷의 TCP/IP 프로토콜과 패킷 교환 방식](https://better-together.tistory.com/110)  
[[시나공 컴활1급] 062 IP 주소, IPv6](https://www.youtube.com/watch?v=1G8jwArWMPs)  
[IPv4주소 체계에 대한 암기사항](https://www.youtube.com/watch?v=gOMljj6K2V0)  
[[IT/Network] IP란?](https://yoo11052.tistory.com/32)  
[IP란 무엇인가](https://study-recording.tistory.com/7)  
[[네트워크] 서브넷, 서브넷마스크, 서브넷팅이란? | 서브넷팅 예제](https://code-lab1.tistory.com/34)  
[[네트워크] 라우팅 알고리즘 비교 | Link State 알고리즘, Distance Vector 알고리즘](https://code-lab1.tistory.com/37)  
[ICMP(인터넷 제어 메시지 프로토콜)](https://www.fortinet.com/kr/resources/cyberglossary/internet-control-message-protocol-icmp)  
[[네트워크] ICMP 란?](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=rbdi3222&logNo=220602423771)  
[오류 검출 방식(패리티 검사, CRC, 체크섬, 해밍코드)::네트워크](https://junboom.tistory.com/32)  
[라우터/L3 스위치: 3계층 장비](https://catsbi.oopy.io/225439bd-ec84-4e16-aeca-0dfcb9954ea6)
